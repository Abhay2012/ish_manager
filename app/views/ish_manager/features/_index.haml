
- if defined? city
  - edit_url   = -> (feature ) { edit_city_feature_path( city.id, feature.id ) }
  - delete_url = -> (feature ) { city_feature_path(      city.id, feature.id ) }
  - new_path   = new_city_feature_path( city.id )
- if defined? site
  - edit_url   = -> (feature) { edit_site_feature_path( site.id, feature.id ) }
  - delete_url = -> (feature) { site_feature_path(      site.id, feature.id ) }
  - new_path   = new_site_feature_path( site.id )
  
.manager-features--index
  %h2
    Features (#{features.length})
    = link_to '[+]', new_path
    
  .row
    - features.each_with_index do |feature, idx|
      .col-sm-3
        .panel.panel-default
          = link_to '[~]', edit_url.call( feature )
          = link_to '[x]', delete_url.call( feature ), :method => :delete, :data => { :confirm => 'Are you sure?' }
          = render 'ish_manager/features/item', :feature => feature
  %hr
